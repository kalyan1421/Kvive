rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // Admins have FULL access to all storage
    // Admin users are identified by their UID in the adminUsers Firestore collection
    // Note: Storage rules can't directly check Firestore, so we rely on Firebase Auth
    // and the admin app's authentication flow
    
    // Allow authenticated users to read/write everything
    // The admin app ensures only admins can authenticate
    // Regular app users can also access their own data
    match /{allPaths=**} {
      allow read, write: if request.auth != null;
    }
  }
}


